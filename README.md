# Функционал по отправке причины отклонения регулирования зазора 

## Инструкция для запуска приложения
1. Создать таблицу в БД с именем `db_reject` c кодировкой `utf8_general_ci`
2. Открыть vs code
3. Запустить git bash терминал
4. Далее наборы команд в терминале:
5.  `py -m venv venv`
6. `source venv/Scripts/activate`
7. `pip install -r requirements.txt`
8. `py app.py`
## Дизайнерам для навигации:
1. В app/templates/reject есть файлы .html
2. В app/static/style.css есть стили
3. Меню навигации в index.html

### Задачи (выполнено):
- По нажатию по одному из пункто навигации, он должен как-то выделяться среди других (веделение согласно брендбуку РАЗУМА)
- Если на пункте меню УВЕДОМЛЕНИЯ висит класс **.have-notification** это значит, что у него должна быть **href="/reject-form"**, иначе **href="/notification-journal"**


## Дизайнерам задачи: 
- Сверстать дизайн следующих элементов:  
  - [ ] Форм ввода, сейчас выглядит вот так  
     ![Форма ввода](/readme_images/form.png)
  - [ ] Журнал сообщений выглядит так  
      ![Журнал сообщений](/readme_images/journal.png)
- [ ] В шапке слово `Уведомления` нужно будет заменить на иконку в стиле непрочитанного письма или непрочитанных уведомлений (как в соц. сетях), если есть пустые записи в БД. 
## Файловая структура:

    .
    |-- README.md
    |-- app
    |   |-- __init__.py
    |   |-- __pycache__
    |   |   |-- __init__.cpython-310.pyc
    |   |   |-- config.cpython-310.pyc
    |   |   |-- forms.cpython-310.pyc
    |   |   `-- models.cpython-310.pyc
    |   |-- config.py
    |   |-- forms.py
    |   |-- main_bp
    |   |   |-- __init__.py
    |   |   |-- __pycache__
    |   |   |   |-- __init__.cpython-310.pyc
    |   |   |   `-- views.cpython-310.pyc
    |   |   `-- views.py
    |   |-- models.py
    |   |-- static
    |   |   |-- Sign_green.png
    |   |   |-- script.js
    |   |   `-- style.css
    |   `-- templates
    |       `-- reject
    |           |-- blog.html
    |           |-- header.html
    |           |-- index.html
    |           |-- journal.html
    |           |-- notification_journal.html
    |           |-- products.html
    |           |-- reject_form.html
    |           `-- services.html
    |-- app.log
    |-- app.py
    |-- docs
    |   `-- technical_task.txt
    |-- project_tree.txt
    |-- readme_images
    |   |-- form.png
    |   `-- journal.png
    |-- requirements.txt
    `-- test_queries.py

    9 directories, 32 files




## Общее ТЗ задачи

    Это сообщение всплывает в системе перед регулировкой щели ИСУ (оно есть):

      N дробилки|время|
      Произвести ли регулировку зазора на столько-то миллиметров?

      ДА  ОТЛОЖИТЬ  НЕТ (кнопки)

     При нажатии на кнопку нет, ответственный персонал должен заполнить форму.
    В форме будет ответ на вопрос: почему они отказались регулировать зазор?

     При тройном подряд клике на кнопку отложить, тоже нужно уведомить и предложить заполнить форму.

    В форме содержится следующая мета-инфа: N дробилки|время|

     В форме будет поле для ввода. Когда работник заходит на web-интерфейс, у 
     него будет уведомление с приглашением заполнить форму для уточнения причины отказа регулирования зазора. 

    Форма на отдельной странице, не всплывающее сообщение!

    Надо сделать:
    Механизм реакции на события (нажатие кнопки нет, три подряд отложить)
    Журнал сообщений (записи с ответами)


    Возможное решение
    В словаре session хранится под ключом is_gap_control_rejected.
    Если в этом месте true, то в списке уведомлений появляется приглашение заполнить форму. Аналогично с отложенностью.

    В какой-то части уведомления будет ссылка на форму с полями:

    ФОРМА
    дата(авто. заполнено)|#дробили(авто. заполнено)|Причина (текстовое поле для ввода)
    Отправить(кнопка)


    _________________________________________________________
    UPD 30.03.2023 - созвон Михаил Горев, Братчиков, Я

    Проверить строку-комментарий на два значения (NUll и "")
    Считать уведомлением то, что есть пустой (NULL и "") комментарий в таблице:

    journal_table
    ________________________________________________ |
    id|дата_время|No_дробилки|комментарий |


    Потом фильтр по дате, по номеру дробилки и заполнить/не заполнить -- это для журнала. 

    Троекратное "отложить" - это такое же сигнал, как один раз нажать "нет"

