{% extends "reject/index.html" %}
{% block content %}
    {% if forms is not none and forms.comments|length %}
        <h1>Форма заполнения причины отказа</h1>
        <hr>
        <form   style="padding-left: 150px;"
                action="{{ url_for('main.reject_form_post') }}"
                class="reject-form" 
                method="post">
            {{ forms.csrf_token }}
            {% for form in forms.comments %}
                <div>{{ form.comment.label }} <br>
                    {{ form.comment(class="comment", placeholder="Ваша причина, сэр:",
                                    cols="65")}}
                </div>
                {% if form.comment.errors %}
                    <ul class="errors">
                        {% for error in form.comment.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            {% endfor %}
        <div>{{ forms.submit() }}</div>
        </form>
    {% else %}
        {% if journal %}
        <h1>Журнал сообщений с информацией о причинах отказов от регулирования</h1>
        <hr>
            {% for j in journal %}
                <p>
                    Отказано <b>{{ j['time_created'] }}</b>; причина написана <b>{{j['time_updated']}}</b>;
                    № дробилки <b>{{j['crusher_id']}}</b>
                </p>
                <p>
                    <b>Комментарий:</b>
                    <br>
                    <i>{{j['comment']}}</i>
                </p>
            {% endfor %}
        {% else %}
            <p>Тут будет журнал предыдущих записей (нет надобности что-то заполнять)</p>
        {% endif %}
    {% endif %}
{% endblock content %}